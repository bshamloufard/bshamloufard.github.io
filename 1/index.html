<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 1: Prokudin-Gorskii Colorizer - Ben Shamloufard</title>
    <link rel="stylesheet" href="../print.css" media="print">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body,
        html {
            height: 100%;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        /* Video Background */
        #video-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            object-fit: cover;
            pointer-events: none;
            user-select: none;
        }



        /* Content Overlay */
        .content {
            position: relative;
            z-index: 1;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            min-height: 100vh;
        }

        /* Navigation */
        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
        }

        .nav a {
            color: white;
            text-decoration: none;
            font-size: 1.1rem;
            transition: opacity 0.3s ease;
        }

        .nav a:hover {
            opacity: 0.7;
        }

        /* Header */
        .header {
            padding: 8rem 2rem 4rem;
            text-align: center;
            max-width: 1400px;
            margin: 0 auto;
        }

        .header h1 {
            font-size: 4.5rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            font-family: 'Georgia', serif;
        }

        .header .subtitle {
            font-size: 1.8rem;
            opacity: 0.9;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            margin-bottom: 2rem;
        }

        .header .intro {
            font-size: 1.4rem;
            line-height: 1.6;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            max-width: 1000px;
            margin: 0 auto;
        }

        /* Sections */
        .section {
            padding: 4rem 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .section h2 {
            font-size: 3rem;
            margin-bottom: 2rem;
            text-align: center;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            color: #fff;
        }

        .section-content {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 3rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 3rem;
        }

        .explanation {
            font-size: 1.3rem;
            line-height: 1.7;
            margin-bottom: 2rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .explanation strong {
            color: #ffd700;
        }

        /* Image Comparison */
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin: 2rem 0;
        }

        .image-container {
            text-align: center;
        }

        .image-container img {
            width: 100%;
            max-width: 400px;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease;
        }

        .image-container img:hover {
            transform: scale(1.05);
        }

        .image-caption {
            margin-top: 1rem;
            font-size: 1.1rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }

        /* Video Container */
        .video-container {
            text-align: center;
            margin: 2rem 0;
        }

        .video-container video,
        .video-container img {
            width: 100%;
            max-width: 600px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .video-caption {
            margin-top: 1rem;
            font-size: 1.2rem;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }

        /* Project Cards */
        .project-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2.5rem;
            margin: 2rem 0;
        }

        .project-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 1.5rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .project-card img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 1rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .project-card h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: #ffd700;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }

        .project-card .alignment-info {
            font-size: 1rem;
            color: #ccc;
            margin-top: 0.5rem;
            font-family: 'Courier New', monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 0.7rem;
            border-radius: 5px;
        }

        .algorithm-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 3rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin: 3rem 0;
        }

        .algorithm-section h3 {
            color: #ffd700;
            font-size: 1.8rem;
            margin-bottom: 1rem;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
        }

        .algorithm-section p {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .algorithm-section ul {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .algorithm-section li {
            margin-bottom: 0.7rem;
            line-height: 1.6;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 3rem;
            }

            .header .subtitle {
                font-size: 1.5rem;
            }

            .header .intro {
                font-size: 1.2rem;
            }

            .section h2 {
                font-size: 2.5rem;
            }

            .comparison {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .section-content {
                padding: 2rem;
            }

            .nav {
                padding: 1rem;
            }

            .project-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .algorithm-section {
                padding: 2rem;
            }
        }
    </style>
</head>

<body>
    <video id="video-background" autoplay muted loop>
        <source src="../fixedTranquil.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>

    <div class="content">
        <nav class="nav">
            <a href="../index.html">‚Üê Back to Portfolio</a>
        </nav>

        <header class="header">
            <h1>Project 1: Prokudin-Gorskii Colorizer</h1>
            <p class="subtitle">Automatically Aligning and Colorizing Historical Glass Plate Images</p>
            <p class="intro">
                This project takes the digitized Prokudin-Gorskii glass plate images and uses image processing
                techniques to automatically produce color images with minimal visual artifacts. By extracting three
                color channel images (Blue, Green, Red) and aligning them using single-scale and multi-scale pyramid
                algorithms, we recreate the pioneering color photography work of Sergei Mikhailovich Prokudin-Gorskii
                from the early 1900s.
            </p>
        </header>

        <section class="section">
            <h2>Algorithm Overview</h2>
            <div class="algorithm-section">
                <p>
                    This project implements an automatic colorization system for Prokudin-Gorskii's historical glass
                    plate photographs.
                    The algorithm extracts three color channels (Blue, Green, Red) from vertically stacked grayscale
                    images and aligns
                    them to produce seamless color photographs.
                </p>

                <h3>Key Components:</h3>
                <ul>
                    <li><strong>Single-Scale Alignment:</strong> Exhaustive search over small displacement windows using
                        Normalized Cross-Correlation (NCC)</li>
                    <li><strong>Multi-Scale Pyramid:</strong> Coarse-to-fine alignment strategy for high-resolution
                        images with large displacements</li>
                    <li><strong>Gradient-Based Scoring:</strong> Edge-focused alignment using gradient magnitudes for
                        robust matching</li>
                    <li><strong>Border Cropping:</strong> Intelligent border removal to avoid alignment artifacts from
                        image edges</li>
                </ul>

                <p>
                    The blue channel serves as the reference, with green and red channels aligned to it using
                    displacement vectors.
                    For small images (.jpg), single-scale search is sufficient. For large images (.tif), the pyramid
                    approach
                    efficiently handles displacements up to hundreds of pixels.
                </p>
            </div>
        </section>

        <section class="section">
            <h2>Part 1: Single-Scale Implementation</h2>
            <div class="algorithm-section">
                <p>
                    For the single-scale implementation, which is applied to lower-resolution JPG images, the red and
                    green
                    color channels are aligned against the fixed blue channel using our <code>align</code> function. The
                    alignment process involves an exhaustive search for the optimal pixel displacement within a
                    predefined
                    window, controlled by the <code>searchRadius=15</code> parameter.
                </p>
                <p>
                    To evaluate the quality of each potential alignment, we use our <code>nccScore</code> function,
                    which is
                    passed in as the <code>scoreFn</code>. NCC is a robust metric that measures the similarity between
                    two
                    images while being insensitive to linear variations in brightness and contrast. To further improve
                    accuracy, the <code>align</code> function uses a <code>borderIgnorePct=0.1</code> to crop a 10%
                    border
                    from each side of the images before the score is calculated, preventing edge artifacts from
                    influencing
                    the result.
                </p>
                <p>
                    The displacement that yields the highest score is considered the optimal alignment. Once the best
                    offsets are determined, the channels are shifted using <code>np.roll</code>. Finally, the aligned
                    channels are stacked to produce the final colorized RGB image.
                </p>
            </div>
        </section>

        <section class="section">
            <h2>Part 1: Single-Scale Alignment (Small Images)</h2>
            <div class="section-content">
                <div class="explanation">
                    <strong>Approach:</strong> Using exhaustive search over a [-15,15] pixel window with Normalized
                    Cross-Correlation
                    scoring. This method works well for smaller .jpg images where displacements are typically small.
                </div>

                <div class="project-grid">
                    <div class="project-card">
                        <img src="media/cathedral_colorized.jpg" alt="Cathedral colorized result">
                        <h3>Cathedral</h3>
                        <div class="alignment-info">
                            Red: (12, 3)<br>
                            Green: (5, 2)
                        </div>
                    </div>
                    <div class="project-card">
                        <img src="media/monastery_colorized.jpg" alt="Monastery colorized result">
                        <h3>Monastery</h3>
                        <div class="alignment-info">
                            Red: (3, 2)<br>
                            Green: (-3, 2)
                        </div>
                    </div>
                    <div class="project-card">
                        <img src="media/tobolsk_colorized.jpg" alt="Tobolsk colorized result">
                        <h3>Tobolsk</h3>
                        <div class="alignment-info">
                            Red: (6, 3)<br>
                            Green: (3, 3)
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Part 2: Multi-Scale Pyramid Implementation</h2>
            <div class="algorithm-section">
                <p>
                    For high-resolution TIF images, a single-scale search is computationally prohibitive. Instead, we
                    employ
                    a more efficient multi-scale image pyramid strategy using our <code>pyramidAlign</code> function to
                    find
                    the optimal alignment in a coarse-to-fine manner.
                </p>
                <p>
                    First, a helper function, <code>makePyramid</code>, constructs an image pyramid for each channel by
                    progressively downscaling the image by a factor of <code>scale=0.5</code>. The
                    <code>pyramidAlign</code> function begins its search at the coarsest level of the pyramid,
                    performing a
                    wide search with <code>coarseRadius=20</code> to find an initial displacement.
                </p>
                <p>
                    The scoring metric at this stage, passed in as the <code>scoreFn</code>, is our
                    <code>gradNccScore</code> function. This function first computes the gradient magnitude of the
                    images
                    using Sobel filters and then calculates the NCC on those gradients. This focuses on aligning
                    structural
                    features and edges, making it more robust.
                </p>
                <p>
                    The displacement found at the coarse level is then scaled up and used as the starting point for a
                    refined search using <code>refineRadius=4</code> at the next, finer pyramid level. This process is
                    repeated iteratively up to the original, full-resolution image. By calling our <code>align</code>
                    function at each level with a smaller search radius, the algorithm efficiently hones in on the
                    precise
                    alignment.
                </p>
                <p>
                    Once the final, accumulated displacement is determined, the channels are rolled into alignment and
                    stacked with the blue channel to create the final, high-quality color image.
                </p>
            </div>
        </section>

        <section class="section">
            <h2>Part 2: Multi-Scale Pyramid Alignment (Large Images)</h2>
            <div class="section-content">
                <div class="explanation">
                    <strong>Approach:</strong> Implementing a coarse-to-fine pyramid strategy with gradient-based NCC
                    scoring.
                    This handles large displacements efficiently by starting with downsampled images and refining the
                    alignment
                    at each pyramid level.
                </div>

                <div class="project-grid">
                    <div class="project-card">
                        <img src="media/church_colorized.jpg" alt="Church colorized result">
                        <h3>Church</h3>
                        <div class="alignment-info">
                            Red: (58, -4)<br>
                            Green: (25, 4)
                        </div>
                    </div>
                    <div class="project-card">
                        <img src="media/emir_colorized.jpg" alt="Emir colorized result">
                        <h3>Emir</h3>
                        <div class="alignment-info">
                            Red: (107, 40)<br>
                            Green: (49, 24)
                        </div>
                    </div>
                    <div class="project-card">
                        <img src="media/harvesters_colorized.jpg" alt="Harvesters colorized result">
                        <h3>Harvesters</h3>
                        <div class="alignment-info">
                            Red: (124, 14)<br>
                            Green: (60, 17)
                        </div>
                    </div>
                    <div class="project-card">
                        <img src="media/icon_colorized.jpg" alt="Icon colorized result">
                        <h3>Icon</h3>
                        <div class="alignment-info">
                            Red: (90, 23)<br>
                            Green: (42, 17)
                        </div>
                    </div>
                    <div class="project-card">
                        <img src="media/italil_colorized.jpg" alt="Lady colorized result">
                        <h3>Lady</h3>
                        <div class="alignment-info">
                            Red: (77, 36)<br>
                            Green: (38, 22)
                        </div>
                    </div>
                    <div class="project-card">
                        <img src="media/melons_colorized.jpg" alt="Melons colorized result">
                        <h3>Melons</h3>
                        <div class="alignment-info">
                            Red: (177, 13)<br>
                            Green: (80, 10)
                        </div>
                    </div>
                    <div class="project-card">
                        <img src="media/lastochikino_colorized.jpg" alt="Onion Church colorized result">
                        <h3>Onion Church</h3>
                        <div class="alignment-info">
                            Red: (76, -8)<br>
                            Green: (-3, -2)
                        </div>
                    </div>
                    <div class="project-card">
                        <img src="media/lugano_colorized.jpg" alt="Sculpture colorized result">
                        <h3>Sculpture</h3>
                        <div class="alignment-info">
                            Red: (92, -29)<br>
                            Green: (41, -17)
                        </div>
                    </div>
                    <div class="project-card">
                        <img src="media/self_portrait_colorized.jpg" alt="Self Portrait colorized result">
                        <h3>Self Portrait</h3>
                        <div class="alignment-info">
                            Red: (176, 37)<br>
                            Green: (78, 29)
                        </div>
                    </div>
                    <div class="project-card">
                        <img src="media/three_generations_colorized.jpg" alt="Three Generations colorized result">
                        <h3>Three Generations</h3>
                        <div class="alignment-info">
                            Red: (111, 9)<br>
                            Green: (54, 12)
                        </div>
                    </div>
                    <div class="project-card">
                        <img src="media/siren_colorized.jpg" alt="Train colorized result">
                        <h3>Train</h3>
                        <div class="alignment-info">
                            Red: (96, -24)<br>
                            Green: (49, -6)
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>Part 3: Bonus Images</h2>
            <div class="section-content">
                <div class="explanation">
                    <strong>Additional Challenges:</strong> These images presented unique alignment challenges,
                    requiring
                    fine-tuned parameters and potentially advanced scoring metrics to achieve optimal results.
                </div>

                <div class="project-grid">
                    <div class="project-card">
                        <img src="media/pickOne_colorized.jpg" alt="Pick One colorized result">
                        <h3>Pick One</h3>
                        <div class="alignment-info">
                            Red: (-34, 10)<br>
                            Green: (-23, 9)
                        </div>
                    </div>
                    <div class="project-card">
                        <img src="media/pickTwo_colorized.jpg" alt="Pick Two colorized result">
                        <h3>Pick Two</h3>
                        <div class="alignment-info">
                            Red: (70, 6)<br>
                            Green: (30, 6)
                        </div>
                    </div>
                    <div class="project-card">
                        <img src="media/pickThree_colorized.jpg" alt="Pick Three colorized result">
                        <h3>Pick Three</h3>
                        <div class="alignment-info">
                            Red: (110, -21)<br>
                            Green: (50, -6)
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>


</body>

</html>